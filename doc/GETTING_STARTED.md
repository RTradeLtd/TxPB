# Getting Started

This documentation covers everything you need to know to quickly get your TemporalX server up and running. If this is your first time installation TemporalX, this is the documentation you should be reading.

## Table Of Contents

<p align="left">
 ·  <a href="#command-overview"><strong>Command Overview</strong></a>
  <br>
  · <a href="#configuration-initialization"><strong>Configuration Initialization</strong></a> 
  <br>
  · <a href="#starting-the-node"><strong>Starting The Node</strong></a>
  <br> 
  · <a href="#stopping-the-node"><strong>Stopping The Node</strong></a>
  <br>
   · <a href="#your-first-upload"><strong>Your First Upload</strong></a>
  <br>
  · <a href="#logging"><strong>Logging</strong></a> 
</p>

## Comand Overview

The command line client is called `tex-cli`, and invoking the command without any arguments, or with the `--help`/`-h` flag will display the following information:

**Note: where it says `<VERSION>` will be the git release tag when the binary was built, this is from `v1.0.0-rc4-3-g14ab982`**

```
NAME:
   tex-cli - TemporalX command-line management tool

USAGE:
   tex-cli [global options] command [command options] [arguments...]

VERSION:
   <VERSION>

AUTHORS:
   Alex Trottier <postables@rtradetechnologies.com>
   George Xie <georgex@rtradetechnologies.com>

COMMANDS:
   client   gRPC client subcommands
   config   configuration management tools
   admin    admin commands
   server   run the gRPC api server
   help, h  Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --bootstrap, --bp          bootstrap against public ipfs
   --config PATH, --cfg PATH  load the configuration file at PATH (default: "./config.yml")
   --help, -h                 show help
   --version, -v              print the version
```

Global Options:
* `--config`, `--cfg`: The path to the yaml configuration file, needed for basically every command
* `--bootstrap`, `--bp`: initiate a bootstrap process when starting the server

Take a look through the various commands to see what you can do.

## Configuration Initialization

To create a yaml configuration file, you can use the command:

```
$ tex-cli config generate
``` 

To populate a default configuration file in your curent directory named `config2.yml`, run the command:

```
$ tex-cli --config config2.yml config generate
```

The default configuartion is set to usable on machines with low memory like raspberry pi's, or other similar devices. If you want to see a configuration suitable for machines with more available resources such as services, see the example config file located in the [config documentation](CONFIGURATION.md).

Make sure you always use a hex encoded private key that is either generated by the tex-cli binary during config initialization, or by yourself securely offline. Do not use any of the ones in the documentation because they are publicly available. These private keys are ed25519 keys as generated by the `go-libp2p-core` crypto library, except they are also hex encoded.

## Starting The Node

To start the node with the config file located at `/tmp/config.yml` run:

```
$ tex-cli --config /tmp/config.yml server
```

If you want to bootstrap against the public libp2p bootstrap servers, and Temporal's public IPFS infrastructure, use the `--bp` flag like so:

```
$ tex-cli --config /tmp/config.yml --bp server
```

This bootstrap process is done in the background, and does not block the startup process.

## Stopping The Node

To stop the node after running the server, you can use any of the following os calls and system calls against the tex-cli server process, such as `kill -9` or `CTRL+C` in the terminal window you are running the server from. This will trigger a graceful shutdown of the node which can take up to 30 seconds. 

Do not abort the process unless you want to face possible data corruption. If you do need ot abort the shutdown process, waiting about 10-15 seconds after the shutdown process is started generally is enough to wait for all internal process to finish, but it is recommmended to wait the full 30 seconds it is required which typically only happens with pending gRPC calls.

## Your First Upload

To upload a file located at `/tmp/foo.txt` as a unixfs object to your local node, and make it publicly available to the IPFS network run the command:

```
$ tex-cli --config /path/to/config.yml client file upload --file.name /tmp/foo.txt
```

Which will return output like:

```
hash of file bafybeifxokjh6pny5eq7fdh3bhik4sfzrpmevp5c24guonwtu44iusa5h4
```

To download the file and save it at `/tmp/foo2.txt` run the command

```
$ tex-cli --config /path/to/config.yml --cid bafybeifxokjh6pny5eq7fdh3bhik4sfzrpmevp5c24guonwtu44iusa5h4 --save.path /tmp/foo2.txt
```

When you run the `client file upload` command, you end up storing the given file as a unixfs object, and you announce to the network that you are providing the returned hash. When you run the `client file download` command, we first check if node has the data for the given cid locally, and if not we ask the rest of the network for that data.

## Logging

By default, logs are printed to standard out, and also stored on disk where ever you specify by the `log_file` config file key. By default we display, and log all levels *except* **debug**.

There are a few environment variables that can be used to adjust logging:

* `DEV_LOGGING=true` - enables logging of extra processing information useful when developing on TemporalX.
* `DEBUG_LOGGING=true`- enables collection of debug level information.
* `FILE_LOGGING=true` - disables logging of information to standard out, and only logs to the log file.


Additionally some of the libraries we use such as `go-libp2p` have internal logging systems. To enable those, you can use the environment variable name `IPFS_LOGGING`, and set it to a log level. For example `IPFS_LOGGING=debug` will enable debug level log collection from libraries use `github.com/ipfs/go-log` internally.